# R code for performing multitemporal analysis

library(imageRy)
library(terra)

im.list() #mostra quanto diossidi di azoto vi erano nel periodo di lock down
# i diossidi di azoto sono veicolati dal traffico, di conseguenza di aspettiamo che sia diminuito lo sviluppo di ossidi di azoto.
#I dati da utilizzare sono quelli che iniziano con "EN"


EN_01 = im.import("EN_01.png")
EN_01 = flip (EN_01)
plot(EN_01) # è l'immagine pre lock down


EN_13 = im.import("EN_13.png")
EN_13 = flip (EN_13)
plot(EN_13)

#excercice plot the two images one beside the other
 im.multiframe(1,2)
plot(EN_01)
plot(EN_13)

#VOGLIAMO FARE LA DIFFERENZA TRA LE DUE IMMAGINI

EN_dif = EN_01[[1]] - EN_13[[1]]
plot(EN_dif)

#cambiamo leggenda cercando viridis package su google
plot(EN_dif, col = inferno (100))

#---------

#Greenland ice melt

gr = im.import("greenland")

im.multiframe(1,2)
plot(gr[[1]], col = rocket (100))
plot(gr[[4]], col = rocket (100))

grdif = gr[[1]] - gr[[4]]
plot(grdif)

# exporting data
# 1. seleziona la cartella di lavoro (usiamo una funzione che fa un set della working directory)
setwd("C:\Users\chiar\Desktop\UNIBO\Magistrale") # se viene errore devi cambiare gli slash (metti questi: /)

getwd() # wd: working directory
plot(gr)

#primo modo per esportare
png("greenland_output.png") #così creo il file
plot(gr) #qui plotto dentro i grafici
dev.off()

#secondo modo per esportare
pdf("greenland_output.pdf")
plot(gr)
dev.off()

pdf("difgreen.pdf")  #mi creo il pdf finale
plot(grdif)
dev.off()

#esportare in jpeg
jpeg("difgreen.jpeg")
plot(grdif)
dev.off()



